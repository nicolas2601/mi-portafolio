import{r as p}from"./index.DtoOFyvK.js";import{a as C,f as h,i as V,J as M,c as m,u as x,M as b}from"./proxy.CK7Kku_V.js";import{u as S,a as J}from"./use-combine-values.CaJ7kinX.js";function D(...t){const n=!Array.isArray(t[0]),o=n?0:-1,r=t[0+o],e=t[1+o],s=t[2+o],a=t[3+o],i=C(e,s,a);return n?i(r):i}function E(t,n,o){const r=t.get();let e=null,s=r,a;const i=typeof r=="string"?r.replace(/[\d.-]/g,""):void 0,c=()=>{e&&(e.stop(),e=null)},A=()=>{c(),e=new M({keyframes:[y(t.get()),y(s)],velocity:t.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...o,onUpdate:a})};if(t.attach((u,f)=>(s=u,a=l=>f(g(l,i)),h.postRender(A),t.get()),c),V(n)){const u=n.on("change",l=>t.set(g(l,i))),f=t.on("destroy",u);return()=>{u(),f()}}return c}function g(t,n){return n?t+n:t}function y(t){return typeof t=="number"?t:parseFloat(t)}function F(t){m.current=[],t();const n=S(m.current,t);return m.current=void 0,n}function I(t,n,o,r){if(typeof t=="function")return F(t);const e=typeof n=="function"?n:D(n,o,r);return Array.isArray(t)?d(t,e):d([t],([s])=>e(s))}function d(t,n){const o=x(()=>[]);return S(t,()=>{o.length=0;const r=t.length;for(let e=0;e<r;e++)o[e]=t[e].get();return n(o)})}function w(t,n={}){const{isStatic:o}=p.useContext(b),r=()=>V(t)?t.get():t;if(o)return I(r);const e=J(r());return p.useInsertionEffect(()=>E(e,t,n),[e,JSON.stringify(n)]),e}export{I as a,w as u};
